<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" name="viewport" content="width=80ch">
  <title>is-daemon</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>
<a href=https://yaq.fyi/>yaq</a>-<a href=../000/>yeps</a>/300
</h1>

<hr>

<h1>
  is-daemon
</h1>

<table>
<tr><th>YEP:</th><td>300</td></tr>
<tr><th>Title:</th><td>is-daemon</td></tr>
<tr><th>Authors:</th><td>Blaise Thompson <blaise@untzag.com></td></tr>
<tr><th>Status:</th><td>accepted</td></tr>
<tr><th>Tags:</th><td>trait</td></tr>
<tr><th>Post-History:</th><td>2020-04-22, 2020-07-14, 2021-02-22</td></tr>
</table>


<h1 id="abstract">Abstract<a class="headerlink" href="#abstract" title="Permanent link"> ¶</a></h1>
<p>This YEP defines the is-daemon trait.
This is a core trait which applies to all yaq daemon.
In other words, this YEP defines the config, state, and messages that all yaq daemons must implement.</p>
<p>This trait has been accepted.
See built documentation at at <a href="https://yaq.fyi/traits/is-daemon/">yaq.fyi</a>.</p>
<h1 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link"> ¶</a></h1>
<div class="toc">
<ul>
<li><a href="#abstract">Abstract</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#proposal">Proposal</a><ul>
<li><a href="#config-port">config: port</a></li>
<li><a href="#config-serial">config: serial</a></li>
<li><a href="#config-make">config: make</a></li>
<li><a href="#config-model">config: model</a></li>
<li><a href="#config-enable">config: enable</a></li>
<li><a href="#config-log_level">config: log_level</a></li>
<li><a href="#config-log_to_file">config: log_to_file</a></li>
<li><a href="#message-busy">message: busy</a></li>
<li><a href="#message-id">message: id</a></li>
<li><a href="#message-get_config_filepath">message: get_config_filepath</a></li>
<li><a href="#message-get_config">message: get_config</a></li>
<li><a href="#message-shutdown">message: shutdown</a></li>
<li><a href="#message-get_state">message: get_state</a></li>
</ul>
</li>
<li><a href="#copyright">Copyright</a></li>
</ul>
</div>
<h1 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link"> ¶</a></h1>
<p>The config, state, and messages here must be implemented by all yaq daemons.</p>
<h1 id="proposal">Proposal<a class="headerlink" href="#proposal" title="Permanent link"> ¶</a></h1>
<h2 id="config-port">config: port<a class="headerlink" href="#config-port" title="Permanent link"> ¶</a></h2>
<p>type: int</p>
<p>TCP port for daemon to occupy.</p>
<h2 id="config-serial">config: serial<a class="headerlink" href="#config-serial" title="Permanent link"> ¶</a></h2>
<p>type: [null, string]</p>
<p>default: null</p>
<p>Serial number for the particular device represented by the daemon.</p>
<h2 id="config-make">config: make<a class="headerlink" href="#config-make" title="Permanent link"> ¶</a></h2>
<p>type: [null, string]</p>
<p>default: null</p>
<p>Make (manufacturer) for the particular device represented by the daemon.</p>
<h2 id="config-model">config: model<a class="headerlink" href="#config-model" title="Permanent link"> ¶</a></h2>
<p>type: [null, string]</p>
<p>default: null</p>
<p>Model (manufacturer part number) for the particular device represented by the daemon.</p>
<h2 id="config-enable">config: enable<a class="headerlink" href="#config-enable" title="Permanent link"> ¶</a></h2>
<p>type: boolean</p>
<p>default: true</p>
<p>Disable this daemon. The kind entry-point will not attempt to start this daemon.</p>
<h2 id="config-log_level">config: log_level<a class="headerlink" href="#config-log_level" title="Permanent link"> ¶</a></h2>
<p>type: {type="enum", name="level", symbols=["debug", "info", "notice", "warning", "error", "critical", "alert", "emergency"]}</p>
<p>default = "info"</p>
<p>Set daemon log level. See <a href="https://yeps.yaq.fyi/106">YEP-106</a> for a complete description of logging in yaq.</p>
<h2 id="config-log_to_file">config: log_to_file<a class="headerlink" href="#config-log_to_file" title="Permanent link"> ¶</a></h2>
<p>type: boolean</p>
<p>default: false</p>
<p>Optionally force logging to a file. See <a href="https://yeps.yaq.fyi/106">YEP-106</a> for a complete description of logging in yaq.</p>
<h2 id="message-busy">message: busy<a class="headerlink" href="#message-busy" title="Permanent link"> ¶</a></h2>
<p>response: boolean</p>
<p>Returns true if daemon is currently busy.</p>
<h2 id="message-id">message: id<a class="headerlink" href="#message-id" title="Permanent link"> ¶</a></h2>
<p>response: {'type': 'map', 'values': ['null', 'string']}</p>
<p>Map with information to identify the daemon, including name, kind, make, model, serial.</p>
<h2 id="message-get_config_filepath">message: get_config_filepath<a class="headerlink" href="#message-get_config_filepath" title="Permanent link"> ¶</a></h2>
<p>response: string</p>
<p>String representing the absolute filepath of the configuration file on the host machine.</p>
<h2 id="message-get_config">message: get_config<a class="headerlink" href="#message-get_config" title="Permanent link"> ¶</a></h2>
<p>response: string</p>
<p>Full configuration for the individual daemon as defined in the TOML file. This includes defaults and shared settings not directly specified in the daemon-specific TOML table.</p>
<h2 id="message-shutdown">message: shutdown<a class="headerlink" href="#message-shutdown" title="Permanent link"> ¶</a></h2>
<p>parameter: restart: boolean <br>
parameter: restart: default: false</p>
<p>Cleanly shutdown (or restart) daemon.</p>
<h2 id="message-get_state">message: get_state<a class="headerlink" href="#message-get_state" title="Permanent link"> ¶</a></h2>
<p>response: string</p>
<p>Daemon state toml file dumped as a as string.</p>
<h1 id="copyright">Copyright<a class="headerlink" href="#copyright" title="Permanent link"> ¶</a></h1>
<p>This document is placed in the public domain or under the CC0-1.0-Universal license, whichever is more permissive.</p>

<hr>

<p>
built 2022-08-09 20:27:49
                                    
<a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>: no copyright
</p>

</body>
</html>